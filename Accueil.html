<!doctype html>
<html lang="fr">
	<head>
	  <meta charset="utf-8">
	  <title>PongJS</title>
	  <link rel="stylesheet" href="style.css">
      <script src="Barre.js"></script>
      <script src="Balle.js"></script>
	  <style type="text/css">
	  </style>

	</head>
	<body>
		<canvas id="Pong"></canvas>
		<script type="text/javascript">
			var canvas = document.getElementById('Pong')
			var ctx = canvas.getContext('2d')

		  	ctx.canvas.width  = window.innerWidth-10;
		 	ctx.canvas.height = window.innerHeight-10;

		 	var b1 = new Barre();
		 	b1.setPosition(10, ctx.canvas.height/2-b1.hauteur/2);
		 	b1.setContexte(ctx);
		 	//b1.description();

		 	var b2 = new Barre();
		 	b2.setPosition(ctx.canvas.width - 20, ctx.canvas.height/2-b2.hauteur/2);
		 	b2.setContexte(ctx);
		 	//b2.description();

		 	var balle = new Balle();
		 	//balle.description();

		 	b1.draw();

		 	b2.draw();

		 	var listeTouches = [];

		 	document.addEventListener('keydown', (event) => {

				//var nomTouche = event.key;
				//console.log(nomTouche);
				if(listeTouches.indexOf(event.key) == -1){
					listeTouches.push(event.key);
				}

				//console.log(listeTouches);

				/*

				if(nomTouche == 'z'){

					b1.move(b1.vitesse);
					//b1.accelere();

				}

				if(nomTouche == 's'){

					b1.move(-b1.vitesse);
					//b1.accelere();

				}

				if(nomTouche == '8'){

					b2.move(b2.vitesse);
					//b2.accelere();

				}

				if(nomTouche == '2'){

					b2.move(-b2.vitesse);
					//b2.accelere();

				}

				*/


			});


			document.addEventListener('keyup', (event) => {

				var index = listeTouches.indexOf(event.key);

				if (index > -1) {
 					listeTouches.splice(index, 1);
				}

				//console.log(listeTouches);


			});

			function animation(){

				if(listeTouches.indexOf('z')>-1){
					b1.move(b1.vitesse);
				}

				if(listeTouches.indexOf('s')>-1){
					b1.move(-b1.vitesse);
				}

				if(listeTouches.indexOf('8')>-1){
					b2.move(b2.vitesse);
				}

				if(listeTouches.indexOf('2')>-1){
					b2.move(-b2.vitesse);
				}

			}

			//window.setInterval(animation,50);



		</script>
	</body>
</html>